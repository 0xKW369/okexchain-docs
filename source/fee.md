
本章的内容基于以下前提：
 
- 每个都能获取到最近的成交价，刚上架的币对采用初始设置的价格作为最近成交价

## 1. 订单失效

**收取条件**

取消订单或者订单过期时，该订单没有部分成交过，即下单数量和剩余数量相等

**手续费收取优先级**

优先使用okt支付，okt不足时才会使用其他币种支付。

**收取规则**

1. 先处理失效订单，将订单中的token返还到余额
2. 如果用户账户的okt余额充足，则从用户账户余额中扣除相应数量的okt作为手续费
3. 如果用户okt余额不足：

    3.1 如果订单中锁定的币种为okt，那么扣除账户内所有okt作为手续费。
    
    3.2 如果订单中锁定的币种为其他币种，如acoin，那么需要扣除acoin，按照acoin/okt的最近成交价格计算需要扣除的acoin数量（fee/acoinPrice）；如果acoin不足以支付当前手续费，则按实际剩余数量全部扣除。

**目前手续费参数参考**

为鼓励用户使用和持有okt，采用okt支付时手续费打折(目前是2折)

操作 | 非okt支付 | okt支付
---|---|---
取消订单 | 等价于 0.01okt | 0.002okt
订单过期 | 等价于 0.01okt | 0.002okt


## 2. 订单成交

**收取条件**

订单成交时，需要按成交额比例收取一定的手续费

**手续费收取优先级**

优先使用okt支付，okt不足时才会使用其他币种支付。

**收取规则**

1. 先成交订单，扣除用户的卖出币种，增加用户的买入币种
2. 按照成交价计算与订单等价的okt总数：如果币对为acoin/okt，那么oktAmt=成交量\*订单成交价；如果币对为acoin/bcoin，那么oktAmt=成交量\*订单成交价\*bcoin_okt价格。
3. 假设采用okt支付，feeNative=oktAmt\*feeRate
4. 判断用户账户的okt余额是否够用，如果够用，则从用户账户余额中扣除相应数量的okt
5. 如果用户账户的okt余额不足以支付手续费，那么直接按比例扣除订单成交后用户收到的token

**目前手续费参数参考**

为鼓励用户使用和持有okt，采用OKT支付时手续费打折

Operation | Pay in non-okt | Pay in okt
---|---|---
Deal | 0.1% | 0.04%


## 3.其他手续费一览

| 模块  | 命令           | 是否抵押 | 系统手续费 | 业务手续费                             |
|-------|----------------|----------|------------|----------------------------------------|
| 选举  | 创建验证人     | 是       | 0.0125     |                                        |
|       | 编辑验证人信息 |          | 0.0125     |                                        |
|       | 委托人委托     | 是       | 0.0125     |                                        |
|       | 委托人解除委托 |          | 0.0125     |                                        |
|       | 委托人更改委托 | 是       | 0.0125     |                                        |
| 分红  | 修改分红地址   |          | 0.0125     |                                        |
| 治理  | 发起提案       | 是       | 0.0125     |                                        |
|       | 针对提案抵押   | 是       | 0.0125     |                                        |
|       | 提案投票-其他  |          | 0.0125     |                                        |
|       | 提案投票-上币  |          |            | 0%                                     |
| 订单  | 挂单           | 是       | 0          |                                        |
|       | 撤单           |          |            | 非OKT：与0.01OKT等值<br> OKT：0.002OKT |
| Token | 激活上币       |          |            | 100000                                 |
|       | 增发           |          |            | 2000                                   |
|       | 销毁           |          |            | 10                                     |
|       | 冻结           |          |            | 0.1                                    |
|       | 转账           |          | 0.0125     |                                        |
|       | 批量转账       |          | n*0.01     |                                        |
|       | 发行           |          |            | 20000                                  |
|       | ownership转移  |          |            | 10                                     |

